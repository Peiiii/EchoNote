import{e as F,g as $,a as H,c as z,b as ie,d as se,f as oe,h as N,i as V,m as _,j,k as I,r as X,l as Q,n as U,s as ae,o as Z,p as q,q as ce}from"./pkg-at-floating-ui-utils-CAQGqlS1.js";function G(e,n,c){let{reference:o,floating:i}=e;const t=$(n),l=U(n),d=Z(l),x=H(n),v=t==="y",r=o.x+o.width/2-i.width/2,s=o.y+o.height/2-i.height/2,m=o[d]/2-i[d]/2;let a;switch(x){case"top":a={x:r,y:o.y-i.height};break;case"bottom":a={x:r,y:o.y+o.height};break;case"right":a={x:o.x+o.width,y:s};break;case"left":a={x:o.x-i.width,y:s};break;default:a={x:o.x,y:o.y}}switch(V(n)){case"start":a[l]-=m*(c&&v?-1:1);break;case"end":a[l]+=m*(c&&v?-1:1);break}return a}const de=async(e,n,c)=>{const{placement:o="bottom",strategy:i="absolute",middleware:t=[],platform:l}=c,d=t.filter(Boolean),x=await(l.isRTL==null?void 0:l.isRTL(n));let v=await l.getElementRects({reference:e,floating:n,strategy:i}),{x:r,y:s}=G(v,o,x),m=o,a={},f=0;for(let g=0;g<d.length;g++){const{name:u,fn:y}=d[g],{x:p,y:A,data:b,reset:w}=await y({x:r,y:s,initialPlacement:o,placement:m,strategy:i,middlewareData:a,rects:v,platform:l,elements:{reference:e,floating:n}});r=p??r,s=A??s,a={...a,[u]:{...a[u],...b}},w&&f<=50&&(f++,typeof w=="object"&&(w.placement&&(m=w.placement),w.rects&&(v=w.rects===!0?await l.getElementRects({reference:e,floating:n,strategy:i}):w.rects),{x:r,y:s}=G(v,m,x)),g=-1)}return{x:r,y:s,placement:m,strategy:i,middlewareData:a}};async function W(e,n){var c;n===void 0&&(n={});const{x:o,y:i,platform:t,rects:l,elements:d,strategy:x}=e,{boundary:v="clippingAncestors",rootBoundary:r="viewport",elementContext:s="floating",altBoundary:m=!1,padding:a=0}=F(n,e),f=I(a),u=d[m?s==="floating"?"reference":"floating":s],y=X(await t.getClippingRect({element:(c=await(t.isElement==null?void 0:t.isElement(u)))==null||c?u:u.contextElement||await(t.getDocumentElement==null?void 0:t.getDocumentElement(d.floating)),boundary:v,rootBoundary:r,strategy:x})),p=s==="floating"?{x:o,y:i,width:l.floating.width,height:l.floating.height}:l.reference,A=await(t.getOffsetParent==null?void 0:t.getOffsetParent(d.floating)),b=await(t.isElement==null?void 0:t.isElement(A))?await(t.getScale==null?void 0:t.getScale(A))||{x:1,y:1}:{x:1,y:1},w=X(t.convertOffsetParentRelativeRectToViewportRelativeRect?await t.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:p,offsetParent:A,strategy:x}):p);return{top:(y.top-w.top+f.top)/b.y,bottom:(w.bottom-y.bottom+f.bottom)/b.y,left:(y.left-w.left+f.left)/b.x,right:(w.right-y.right+f.right)/b.x}}const ue=e=>({name:"arrow",options:e,async fn(n){const{x:c,y:o,placement:i,rects:t,platform:l,elements:d,middlewareData:x}=n,{element:v,padding:r=0}=F(e,n)||{};if(v==null)return{};const s=I(r),m={x:c,y:o},a=U(i),f=Z(a),g=await l.getDimensions(v),u=a==="y",y=u?"top":"left",p=u?"bottom":"right",A=u?"clientHeight":"clientWidth",b=t.reference[f]+t.reference[a]-m[a]-t.floating[f],w=m[a]-t.reference[a],O=await(l.getOffsetParent==null?void 0:l.getOffsetParent(v));let S=O?O[A]:0;(!S||!await(l.isElement==null?void 0:l.isElement(O)))&&(S=d.floating[A]||t.floating[f]);const L=b/2-w/2,C=S/2-g[f]/2-1,h=_(s[y],C),P=_(s[p],C),D=h,k=S-g[f]-P,R=S/2-g[f]/2+L,B=z(D,R,k),M=!x.arrow&&V(i)!=null&&R!==B&&t.reference[f]/2-(R<D?h:P)-g[f]/2<0,T=M?R<D?R-D:R-k:0;return{[a]:m[a]+T,data:{[a]:B,centerOffset:R-B-T,...M&&{alignmentOffset:T}},reset:M}}});function le(e,n,c){return(e?[...c.filter(i=>V(i)===e),...c.filter(i=>V(i)!==e)]:c.filter(i=>H(i)===i)).filter(i=>e?V(i)===e||(n?ce(i)!==i:!1):!0)}const ge=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(n){var c,o,i;const{rects:t,middlewareData:l,placement:d,platform:x,elements:v}=n,{crossAxis:r=!1,alignment:s,allowedPlacements:m=q,autoAlignment:a=!0,...f}=F(e,n),g=s!==void 0||m===q?le(s||null,a,m):m,u=await W(n,f),y=((c=l.autoPlacement)==null?void 0:c.index)||0,p=g[y];if(p==null)return{};const A=N(p,t,await(x.isRTL==null?void 0:x.isRTL(v.floating)));if(d!==p)return{reset:{placement:g[0]}};const b=[u[H(p)],u[A[0]],u[A[1]]],w=[...((o=l.autoPlacement)==null?void 0:o.overflows)||[],{placement:p,overflows:b}],O=g[y+1];if(O)return{data:{index:y+1,overflows:w},reset:{placement:O}};const S=w.map(h=>{const P=V(h.placement);return[h.placement,P&&r?h.overflows.slice(0,2).reduce((D,k)=>D+k,0):h.overflows[0],h.overflows]}).sort((h,P)=>h[1]-P[1]),C=((i=S.filter(h=>h[2].slice(0,V(h[0])?2:3).every(P=>P<=0))[0])==null?void 0:i[0])||S[0][0];return C!==d?{data:{index:y+1,overflows:w},reset:{placement:C}}:{}}}},he=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var c,o;const{placement:i,middlewareData:t,rects:l,initialPlacement:d,platform:x,elements:v}=n,{mainAxis:r=!0,crossAxis:s=!0,fallbackPlacements:m,fallbackStrategy:a="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...u}=F(e,n);if((c=t.arrow)!=null&&c.alignmentOffset)return{};const y=H(i),p=$(d),A=H(d)===d,b=await(x.isRTL==null?void 0:x.isRTL(v.floating)),w=m||(A||!g?[ie(d)]:se(d)),O=f!=="none";!m&&O&&w.push(...oe(d,g,f,b));const S=[d,...w],L=await W(n,u),C=[];let h=((o=t.flip)==null?void 0:o.overflows)||[];if(r&&C.push(L[y]),s){const R=N(i,l,b);C.push(L[R[0]],L[R[1]])}if(h=[...h,{placement:i,overflows:C}],!C.every(R=>R<=0)){var P,D;const R=(((P=t.flip)==null?void 0:P.index)||0)+1,B=S[R];if(B&&(!(s==="alignment"?p!==$(B):!1)||h.every(E=>$(E.placement)===p?E.overflows[0]>0:!0)))return{data:{index:R,overflows:h},reset:{placement:B}};let M=(D=h.filter(T=>T.overflows[0]<=0).sort((T,E)=>T.overflows[1]-E.overflows[1])[0])==null?void 0:D.placement;if(!M)switch(a){case"bestFit":{var k;const T=(k=h.filter(E=>{if(O){const Y=$(E.placement);return Y===p||Y==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(Y=>Y>0).reduce((Y,ne)=>Y+ne,0)]).sort((E,Y)=>E[1]-Y[1])[0])==null?void 0:k[0];T&&(M=T);break}case"initialPlacement":M=d;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function J(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function K(e){return ae.some(n=>e[n]>=0)}const xe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:c}=n,{strategy:o="referenceHidden",...i}=F(e,n);switch(o){case"referenceHidden":{const t=await W(n,{...i,elementContext:"reference"}),l=J(t,c.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:K(l)}}}case"escaped":{const t=await W(n,{...i,altBoundary:!0}),l=J(t,c.floating);return{data:{escapedOffsets:l,escaped:K(l)}}}default:return{}}}}};function ee(e){const n=_(...e.map(t=>t.left)),c=_(...e.map(t=>t.top)),o=j(...e.map(t=>t.right)),i=j(...e.map(t=>t.bottom));return{x:n,y:c,width:o-n,height:i-c}}function re(e){const n=e.slice().sort((i,t)=>i.y-t.y),c=[];let o=null;for(let i=0;i<n.length;i++){const t=n[i];!o||t.y-o.y>o.height/2?c.push([t]):c[c.length-1].push(t),o=t}return c.map(i=>X(ee(i)))}const pe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(n){const{placement:c,elements:o,rects:i,platform:t,strategy:l}=n,{padding:d=2,x,y:v}=F(e,n),r=Array.from(await(t.getClientRects==null?void 0:t.getClientRects(o.reference))||[]),s=re(r),m=X(ee(r)),a=I(d);function f(){if(s.length===2&&s[0].left>s[1].right&&x!=null&&v!=null)return s.find(u=>x>u.left-a.left&&x<u.right+a.right&&v>u.top-a.top&&v<u.bottom+a.bottom)||m;if(s.length>=2){if($(c)==="y"){const h=s[0],P=s[s.length-1],D=H(c)==="top",k=h.top,R=P.bottom,B=D?h.left:P.left,M=D?h.right:P.right,T=M-B,E=R-k;return{top:k,bottom:R,left:B,right:M,width:T,height:E,x:B,y:k}}const u=H(c)==="left",y=j(...s.map(h=>h.right)),p=_(...s.map(h=>h.left)),A=s.filter(h=>u?h.left===p:h.right===y),b=A[0].top,w=A[A.length-1].bottom,O=p,S=y,L=S-O,C=w-b;return{top:b,bottom:w,left:O,right:S,width:L,height:C,x:O,y:b}}return m}const g=await t.getElementRects({reference:{getBoundingClientRect:f},floating:o.floating,strategy:l});return i.reference.x!==g.reference.x||i.reference.y!==g.reference.y||i.reference.width!==g.reference.width||i.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}},te=new Set(["left","top"]);async function fe(e,n){const{placement:c,platform:o,elements:i}=e,t=await(o.isRTL==null?void 0:o.isRTL(i.floating)),l=H(c),d=V(c),x=$(c)==="y",v=te.has(l)?-1:1,r=t&&x?-1:1,s=F(n,e);let{mainAxis:m,crossAxis:a,alignmentAxis:f}=typeof s=="number"?{mainAxis:s,crossAxis:0,alignmentAxis:null}:{mainAxis:s.mainAxis||0,crossAxis:s.crossAxis||0,alignmentAxis:s.alignmentAxis};return d&&typeof f=="number"&&(a=d==="end"?f*-1:f),x?{x:a*r,y:m*v}:{x:m*v,y:a*r}}const we=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var c,o;const{x:i,y:t,placement:l,middlewareData:d}=n,x=await fe(n,e);return l===((c=d.offset)==null?void 0:c.placement)&&(o=d.arrow)!=null&&o.alignmentOffset?{}:{x:i+x.x,y:t+x.y,data:{...x,placement:l}}}}},ve=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:c,y:o,placement:i}=n,{mainAxis:t=!0,crossAxis:l=!1,limiter:d={fn:u=>{let{x:y,y:p}=u;return{x:y,y:p}}},...x}=F(e,n),v={x:c,y:o},r=await W(n,x),s=$(H(i)),m=Q(s);let a=v[m],f=v[s];if(t){const u=m==="y"?"top":"left",y=m==="y"?"bottom":"right",p=a+r[u],A=a-r[y];a=z(p,a,A)}if(l){const u=s==="y"?"top":"left",y=s==="y"?"bottom":"right",p=f+r[u],A=f-r[y];f=z(p,f,A)}const g=d.fn({...n,[m]:a,[s]:f});return{...g,data:{x:g.x-c,y:g.y-o,enabled:{[m]:t,[s]:l}}}}}},ye=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:c,y:o,placement:i,rects:t,middlewareData:l}=n,{offset:d=0,mainAxis:x=!0,crossAxis:v=!0}=F(e,n),r={x:c,y:o},s=$(i),m=Q(s);let a=r[m],f=r[s];const g=F(d,n),u=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(x){const A=m==="y"?"height":"width",b=t.reference[m]-t.floating[A]+u.mainAxis,w=t.reference[m]+t.reference[A]-u.mainAxis;a<b?a=b:a>w&&(a=w)}if(v){var y,p;const A=m==="y"?"width":"height",b=te.has(H(i)),w=t.reference[s]-t.floating[A]+(b&&((y=l.offset)==null?void 0:y[s])||0)+(b?0:u.crossAxis),O=t.reference[s]+t.reference[A]+(b?0:((p=l.offset)==null?void 0:p[s])||0)-(b?u.crossAxis:0);f<w?f=w:f>O&&(f=O)}return{[m]:a,[s]:f}}}},Ae=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var c,o;const{placement:i,rects:t,platform:l,elements:d}=n,{apply:x=()=>{},...v}=F(e,n),r=await W(n,v),s=H(i),m=V(i),a=$(i)==="y",{width:f,height:g}=t.floating;let u,y;s==="top"||s==="bottom"?(u=s,y=m===(await(l.isRTL==null?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(y=s,u=m==="end"?"top":"bottom");const p=g-r.top-r.bottom,A=f-r.left-r.right,b=_(g-r[u],p),w=_(f-r[y],A),O=!n.middlewareData.shift;let S=b,L=w;if((c=n.middlewareData.shift)!=null&&c.enabled.x&&(L=A),(o=n.middlewareData.shift)!=null&&o.enabled.y&&(S=p),O&&!m){const h=j(r.left,0),P=j(r.right,0),D=j(r.top,0),k=j(r.bottom,0);a?L=f-2*(h!==0||P!==0?h+P:j(r.left,r.right)):S=g-2*(D!==0||k!==0?D+k:j(r.top,r.bottom))}await x({...n,availableWidth:L,availableHeight:S});const C=await l.getDimensions(d.floating);return f!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}};export{Ae as a,ue as b,de as c,ge as d,he as f,xe as h,pe as i,ye as l,we as o,ve as s};
