const A=Math.PI,L=2*A,M=1e-6,m=L-M;function g(_){this._+=_[0];for(let t=1,i=_.length;t<i;++t)this._+=arguments[t]+_[t]}function w(_){let t=Math.floor(_);if(!(t>=0))throw new Error(`invalid digits: ${_}`);if(t>15)return g;const i=10**t;return function(h){this._+=h[0];for(let s=1,n=h.length;s<n;++s)this._+=Math.round(arguments[s]*i)/i+h[s]}}let I=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?g:w(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,h,s){this._append`Q${+t},${+i},${this._x1=+h},${this._y1=+s}`}bezierCurveTo(t,i,h,s,n,l){this._append`C${+t},${+i},${+h},${+s},${this._x1=+n},${this._y1=+l}`}arcTo(t,i,h,s,n){if(t=+t,i=+i,h=+h,s=+s,n=+n,n<0)throw new Error(`negative radius: ${n}`);let l=this._x1,p=this._y1,$=h-t,e=s-i,a=l-t,o=p-i,u=a*a+o*o;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(u>M)if(!(Math.abs(o*$-e*a)>M)||!n)this._append`L${this._x1=t},${this._y1=i}`;else{let f=h-l,r=s-p,b=$*$+e*e,T=f*f+r*r,y=Math.sqrt(b),v=Math.sqrt(u),c=n*Math.tan((A-Math.acos((b+u-T)/(2*y*v)))/2),x=c/v,C=c/y;Math.abs(x-1)>M&&this._append`L${t+x*a},${i+x*o}`,this._append`A${n},${n},0,0,${+(o*f>a*r)},${this._x1=t+C*$},${this._y1=i+C*e}`}}arc(t,i,h,s,n,l){if(t=+t,i=+i,h=+h,l=!!l,h<0)throw new Error(`negative radius: ${h}`);let p=h*Math.cos(s),$=h*Math.sin(s),e=t+p,a=i+$,o=1^l,u=l?s-n:n-s;this._x1===null?this._append`M${e},${a}`:(Math.abs(this._x1-e)>M||Math.abs(this._y1-a)>M)&&this._append`L${e},${a}`,h&&(u<0&&(u=u%L+L),u>m?this._append`A${h},${h},0,1,${o},${t-p},${i-$}A${h},${h},0,1,${o},${this._x1=e},${this._y1=a}`:u>M&&this._append`A${h},${h},0,${+(u>=A)},${o},${this._x1=t+h*Math.cos(n)},${this._y1=i+h*Math.sin(n)}`)}rect(t,i,h,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${h=+h}v${+s}h${-h}Z`}toString(){return this._}};var P=Math.PI,E=2*P,d=1e-6,Z=E-d;function q(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function z(){return new q}q.prototype=z.prototype={constructor:q,moveTo:function(_,t){this._+="M"+(this._x0=this._x1=+_)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(_,t){this._+="L"+(this._x1=+_)+","+(this._y1=+t)},quadraticCurveTo:function(_,t,i,h){this._+="Q"+ +_+","+ +t+","+(this._x1=+i)+","+(this._y1=+h)},bezierCurveTo:function(_,t,i,h,s,n){this._+="C"+ +_+","+ +t+","+ +i+","+ +h+","+(this._x1=+s)+","+(this._y1=+n)},arcTo:function(_,t,i,h,s){_=+_,t=+t,i=+i,h=+h,s=+s;var n=this._x1,l=this._y1,p=i-_,$=h-t,e=n-_,a=l-t,o=e*e+a*a;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=_)+","+(this._y1=t);else if(o>d)if(!(Math.abs(a*p-$*e)>d)||!s)this._+="L"+(this._x1=_)+","+(this._y1=t);else{var u=i-n,f=h-l,r=p*p+$*$,b=u*u+f*f,T=Math.sqrt(r),y=Math.sqrt(o),v=s*Math.tan((P-Math.acos((r+o-b)/(2*T*y)))/2),c=v/y,x=v/T;Math.abs(c-1)>d&&(this._+="L"+(_+c*e)+","+(t+c*a)),this._+="A"+s+","+s+",0,0,"+ +(a*u>e*f)+","+(this._x1=_+x*p)+","+(this._y1=t+x*$)}},arc:function(_,t,i,h,s,n){_=+_,t=+t,i=+i,n=!!n;var l=i*Math.cos(h),p=i*Math.sin(h),$=_+l,e=t+p,a=1^n,o=n?h-s:s-h;if(i<0)throw new Error("negative radius: "+i);this._x1===null?this._+="M"+$+","+e:(Math.abs(this._x1-$)>d||Math.abs(this._y1-e)>d)&&(this._+="L"+$+","+e),i&&(o<0&&(o=o%E+E),o>Z?this._+="A"+i+","+i+",0,1,"+a+","+(_-l)+","+(t-p)+"A"+i+","+i+",0,1,"+a+","+(this._x1=$)+","+(this._y1=e):o>d&&(this._+="A"+i+","+i+",0,"+ +(o>=P)+","+a+","+(this._x1=_+i*Math.cos(s))+","+(this._y1=t+i*Math.sin(s))))},rect:function(_,t,i,h){this._+="M"+(this._x0=this._x1=+_)+","+(this._y0=this._y1=+t)+"h"+ +i+"v"+ +h+"h"+-i+"Z"},toString:function(){return this._}};export{I as P,z as p};
