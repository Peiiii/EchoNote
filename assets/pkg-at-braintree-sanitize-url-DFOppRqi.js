var w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function U(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c={},t={},g;function C(){return g||(g=1,Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_URL=t.relativeFirstCharacters=t.whitespaceEscapeCharsRegex=t.urlSchemeRegex=t.ctrlCharactersRegex=t.htmlCtrlEntityRegex=t.htmlEntitiesRegex=t.invalidProtocolRegex=void 0,t.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,t.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,t.htmlCtrlEntityRegex=/&(newline|tab);/gi,t.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,t.urlSchemeRegex=/^.+(:|&colon;)/gim,t.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,t.relativeFirstCharacters=[".","/"],t.BLANK_URL="about:blank"),t}var m;function x(){if(m)return c;m=1,Object.defineProperty(c,"__esModule",{value:!0}),c.sanitizeUrl=void 0;var e=C();function R(r){return e.relativeFirstCharacters.indexOf(r[0])>-1}function f(r){var n=r.replace(e.ctrlCharactersRegex,"");return n.replace(e.htmlEntitiesRegex,function(a,i){return String.fromCharCode(i)})}function p(r){return URL.canParse(r)}function u(r){try{return decodeURIComponent(r)}catch{return r}}function v(r){if(!r)return e.BLANK_URL;var n,a=u(r.trim());do a=f(a).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),a=u(a),n=a.match(e.ctrlCharactersRegex)||a.match(e.htmlEntitiesRegex)||a.match(e.htmlCtrlEntityRegex)||a.match(e.whitespaceEscapeCharsRegex);while(n&&n.length>0);var i=a;if(!i)return e.BLANK_URL;if(R(i))return i;var h=i.trimStart(),d=h.match(e.urlSchemeRegex);if(!d)return i;var o=d[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(o))return e.BLANK_URL;var s=h.replace(/\\/g,"/");if(o==="mailto:"||o.includes("://"))return s;if(o==="http:"||o==="https:"){if(!p(s))return e.BLANK_URL;var l=new URL(s);return l.protocol=l.protocol.toLowerCase(),l.hostname=l.hostname.toLowerCase(),l.toString()}return s}return c.sanitizeUrl=v,c}var L=x();export{w as c,L as d,U as g};
