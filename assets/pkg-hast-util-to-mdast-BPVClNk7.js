import{s as E}from"./pkg-at-ungap-structured-clone--gfxRhYI.js";import{t as Z}from"./pkg-trim-trailing-lines-7L_Z2a2U.js";import{t as v}from"./pkg-hast-util-to-text-C4DEUCmM.js";import{p as K}from"./pkg-hast-util-phrasing-B72AGgQS.js";import{p as _}from"./pkg-mdast-util-phrasing-CAX20Uul.js";import{w as ee}from"./pkg-hast-util-whitespace-D4Wp6AEg.js";import{v as N}from"./pkg-unist-util-visit-Ddo8Kubz.js";import{t as te}from"./pkg-mdast-util-to-string-C_aolqmU.js";import{E as ne,S as re}from"./pkg-unist-util-visit-parents-BcSs7PJp.js";import{a as le}from"./pkg-unist-util-position-B29JQW-R.js";import{r as ie}from"./pkg-rehype-minify-whitespace-BY0G4hOn.js";function se(e,t){const n=t.properties||{},r=e.all(t),l={type:"link",url:e.resolve(String(n.href||"")||null),title:n.title?String(n.title):null,children:r};return e.patch(t,l),l}function ce(e,t){e.baseFound||(e.frozenBaseUrl=String(t.properties&&t.properties.href||"")||void 0,e.baseFound=!0)}function oe(e,t){const n={type:"blockquote",children:e.toFlow(e.all(t))};return e.patch(t,n),n}function ae(e,t){const n={type:"break"};return e.patch(t,n),n}const T="language-";function x(e,t){const n=t.children;let r=-1,l,i;if(t.tagName==="pre")for(;++r<n.length;){const s=n[r];if(s.type==="element"&&s.tagName==="code"&&s.properties&&s.properties.className&&Array.isArray(s.properties.className)){l=s.properties.className;break}}if(l){for(r=-1;++r<l.length;)if(String(l[r]).slice(0,T.length)===T){i=String(l[r]).slice(T.length);break}}const o={type:"code",lang:i||null,meta:null,value:Z(v(t))};return e.patch(t,o),o}function ue(e,t){const n={type:"html",value:"<!--"+t.value+"-->"};return e.patch(t,n),n}function M(e,t){const r={type:"delete",children:e.all(t)};return e.patch(t,r),r}function B(e){let t=-1;if(e.length>1){for(;++t<e.length;)if(e[t].spread)return!0}return!1}function pe(e,t){const n=[],r=[];let l=-1;for(;++l<t.children.length;){const s=t.children[l];s.type==="element"&&s.tagName==="div"?n.push(...s.children):n.push(s)}let i={definitions:[],titles:[]};for(l=-1;++l<n.length;){const s=n[l];if(s.type==="element"&&s.tagName==="dt"){const c=n[l-1];c&&c.type==="element"&&c.tagName==="dd"&&(r.push(i),i={definitions:[],titles:[]}),i.titles.push(s)}else i.definitions.push(s)}r.push(i),l=-1;const o=[];for(;++l<r.length;){const s=[...$(e,r[l].titles),...$(e,r[l].definitions)];s.length>0&&o.push({type:"listItem",spread:s.length>1,checked:null,children:s})}if(o.length>0){const s={type:"list",ordered:!1,start:null,spread:B(o),children:o};return e.patch(t,s),s}}function $(e,t){const n=e.all({type:"root",children:t}),r=e.toSpecificContent(n,he);return r.length===0?[]:r.length===1?r[0].children:[{type:"list",ordered:!1,start:null,spread:B(r),children:r}]}function he(){return{type:"listItem",spread:!1,checked:null,children:[]}}function k(e,t){const r={type:"emphasis",children:e.all(t)};return e.patch(t,r),r}function R(e){let t=0,n=e.length;for(;t<n&&e[t].type==="break";)t++;for(;n>t&&e[n-1].type==="break";)n--;return t===0&&n===e.length?e:e.slice(t,n)}function g(e,t){const n=Number(t.tagName.charAt(1))||1,r=R(e.all(t)),l={type:"heading",depth:n,children:r};return e.patch(t,l),l}function fe(e,t){const n={type:"thematicBreak"};return e.patch(t,n),n}function de(e,t){const n=t.properties||{},r=String(n.src||""),l=String(n.title||"");if(r&&l){const i={type:"link",title:null,url:e.resolve(r),children:[{type:"text",value:l}]};return e.patch(t,i),i}}function H(e,t){const n=t.properties||{},r={type:"image",url:e.resolve(String(n.src||"")||null),title:n.title?String(n.title):null,alt:n.alt?String(n.alt):""};return e.patch(t,r),r}function w(e,t){const n={type:"inlineCode",value:v(t)};return e.patch(t,n),n}function Q(e,t){const n=[],r=[],l=t||e.properties||{},i=X(e),o=Math.min(Number.parseInt(String(l.size),10),0)||(l.multiple?4:1);let s=-1;for(;++s<i.length;){const h=i[s];h&&h.properties&&h.properties.selected&&n.push(h)}const c=n.length>0?n:i,a=Math.min(c.length,o);for(s=-1;++s<a;){const h=c[s],f=h.properties||{},m=v(h),y=m||String(f.label||""),b=String(f.value||"")||m;r.push([b,y===b?void 0:y])}return r}function X(e){const t=[];let n=-1;for(;++n<e.children.length;){const r=e.children[n];"children"in r&&Array.isArray(r.children)&&t.push(...X(r)),r.type==="element"&&r.tagName==="option"&&(!r.properties||!r.properties.disabled)&&t.push(r)}return t}const ge="[x]",me="[ ]";function ye(e,t){const n=t.properties||{},r=String(n.value||n.placeholder||"");if(n.disabled||n.type==="hidden"||n.type==="file")return;if(n.type==="checkbox"||n.type==="radio"){const c={type:"text",value:n.checked?e.options.checked||ge:e.options.unchecked||me};return e.patch(t,c),c}if(n.type==="image"){const c=n.alt||r;if(c){const a={type:"image",url:e.resolve(String(n.src||"")||null),title:String(n.title||"")||null,alt:String(c)};return e.patch(t,a),a}return}let l=[];if(r)l=[[r,void 0]];else if(n.type!=="button"&&n.type!=="file"&&n.type!=="password"&&n.type!=="reset"&&n.type!=="submit"&&n.list){const c=String(n.list),a=e.elementById.get(c);a&&a.tagName==="datalist"&&(l=Q(a,n))}if(l.length===0)return;if(n.type==="password"&&(l[0]=["•".repeat(l[0][0].length),void 0]),n.type==="email"||n.type==="url"){const c=[];let a=-1;for(;++a<l.length;){const h=e.resolve(l[a][0]),f={type:"link",title:null,url:n.type==="email"?"mailto:"+h:h,children:[{type:"text",value:l[a][1]||h}]};c.push(f),a!==l.length-1&&c.push({type:"text",value:", "})}return c}const i=[];let o=-1;for(;++o<l.length;)i.push(l[o][1]?l[o][1]+" ("+l[o][0]+")":l[o][0]);const s={type:"text",value:i.join(", ")};return e.patch(t,s),s}function q(e,t){const{rest:n,checkbox:r}=G(t),l=r?!!r.properties.checked:null,i=D(n),o=e.toFlow(e.all(n)),s={type:"listItem",spread:i,checked:l,children:o};return e.patch(t,s),s}function D(e){let t=-1,n=!1;for(;++t<e.children.length;){const r=e.children[t];if(r.type==="element"){if(K(r))continue;if(r.tagName==="p"||n||D(r))return!0;n=!0}}return!1}function G(e){const t=e.children[0];if(t&&t.type==="element"&&t.tagName==="input"&&t.properties&&(t.properties.type==="checkbox"||t.properties.type==="radio")){const n={...e,children:e.children.slice(1)};return{checkbox:t,rest:n}}if(t&&t.type==="element"&&t.tagName==="p"){const{checkbox:n,rest:r}=G(t);if(n){const l={...e,children:[r,...e.children.slice(1)]};return{checkbox:n,rest:l}}}return{checkbox:void 0,rest:e}}function U(e,t){const n=t.tagName==="ol",r=e.toSpecificContent(e.all(t),be);let l=null;n&&(l=t.properties&&t.properties.start?Number.parseInt(String(t.properties.start),10):1);const i={type:"list",ordered:n,start:l,spread:B(r),children:r};return e.patch(t,i),i}function be(){return{type:"listItem",spread:!1,checked:null,children:[]}}function C(e){let t=-1;for(;++t<e.length;){const n=e[t];if(!Y(n)||"children"in n&&C(n.children))return!0}return!1}function J(e){return V(e,t,function(n){return n});function t(n){return n.every(function(r){return r.type==="text"?ee(r.value):!1})?[]:[{type:"paragraph",children:R(n)}]}}function we(e){return V(e.children,t,n);function t(r){const l=A(e);return l.children=r,[l]}function n(r){if("children"in r&&"children"in e){const l=A(e),i=A(r);return l.children=r.children,i.children.push(l),i}return{...r}}}function V(e,t,n){const r=ve(e),l=[];let i=[],o=-1;for(;++o<r.length;){const s=r[o];Y(s)?i.push(s):(i.length>0&&(l.push(...t(i)),i=[]),l.push(n(s)))}return i.length>0&&(l.push(...t(i)),i=[]),l}function ve(e){const t=[];let n=-1;for(;++n<e.length;){const r=e[n];(r.type==="delete"||r.type==="link")&&C(r.children)?t.push(...we(r)):t.push(r)}return t}function Y(e){const t=e.data&&e.data.hName;return t?K({type:"element",tagName:t,properties:{},children:[]}):_(e)}function A(e){return E({...e,children:[]})}function O(e,t){const n=t.properties||{},r=t.tagName==="video"?String(n.poster||""):"";let l=String(n.src||""),i=-1,o=!1,s=e.all(t);if(N({type:"root",children:s},function(f){if(f.type==="link")return o=!0,ne}),o||C(s))return s;for(;!l&&++i<t.children.length;){const f=t.children[i];f.type==="element"&&f.tagName==="source"&&f.properties&&(l=String(f.properties.src||""))}if(r){const f={type:"image",title:null,url:e.resolve(r),alt:te(s)};e.patch(t,f),s=[f]}const a=s,h={type:"link",title:n.title?String(n.title):null,url:e.resolve(l),children:a};return e.patch(t,h),h}function z(e,t){const n=R(e.all(t));if(n.length>0){const r={type:"paragraph",children:n};return e.patch(t,r),r}}const Se=['"'];function xe(e,t){const n=e.options.quotes||Se;e.qNesting++;const r=e.all(t);e.qNesting--;const l=n[e.qNesting%n.length],i=r[0],o=r[r.length-1],s=l.charAt(0),c=l.length>1?l.charAt(1):l;return i&&i.type==="text"?i.value=s+i.value:r.unshift({type:"text",value:s}),o&&o.type==="text"?o.value+=c:r.push({type:"text",value:c}),r}function ke(e,t){let n=e.all(t);(e.options.document||C(n))&&(n=J(n));const r={type:"root",children:n};return e.patch(t,r),r}function Ne(e,t){const n=Q(t);let r=-1;const l=[];for(;++r<n.length;){const i=n[r];l.push(i[1]?i[1]+" ("+i[0]+")":i[0])}if(l.length>0){const i={type:"text",value:l.join(", ")};return e.patch(t,i),i}}function P(e,t){const r={type:"strong",children:e.all(t)};return e.patch(t,r),r}function j(e,t){const r={type:"tableCell",children:e.all(t)};if(e.patch(t,r),t.properties){const l=t.properties.rowSpan,i=t.properties.colSpan;if(l||i){const o=r.data||(r.data={});l&&(o.hastUtilToMdastTemporaryRowSpan=l),i&&(o.hastUtilToMdastTemporaryColSpan=i)}}return r}function Ce(e,t){const r={type:"tableRow",children:e.toSpecificContent(e.all(t),Ie)};return e.patch(t,r),r}function Ie(){return{type:"tableCell",children:[]}}function Te(e,t){if(e.inTable){const a={type:"text",value:v(t)};return e.patch(t,a),a}e.inTable=!0;const{align:n,headless:r}=Me(t),l=e.toSpecificContent(e.all(t),L);r&&l.unshift(L());let i=-1;for(;++i<l.length;){const a=l[i],h=e.toSpecificContent(a.children,qe);a.children=h}let o=1;for(i=-1;++i<l.length;){const a=l[i].children;let h=-1;for(;++h<a.length;){const f=a[h];if(f.data){const m=f.data,y=Number.parseInt(String(m.hastUtilToMdastTemporaryColSpan),10)||1,b=Number.parseInt(String(m.hastUtilToMdastTemporaryRowSpan),10)||1;if(y>1||b>1){let S=i-1;for(;++S<i+b;){let I=h-1;for(;++I<h+y&&l[S];){const F=[];(S!==i||I!==h)&&F.push({type:"tableCell",children:[]}),l[S].children.splice(I,0,...F)}}}"hastUtilToMdastTemporaryColSpan"in f.data&&delete f.data.hastUtilToMdastTemporaryColSpan,"hastUtilToMdastTemporaryRowSpan"in f.data&&delete f.data.hastUtilToMdastTemporaryRowSpan,Object.keys(f.data).length===0&&delete f.data}}a.length>o&&(o=a.length)}for(i=-1;++i<l.length;){const a=l[i].children;let h=a.length-1;for(;++h<o;)a.push({type:"tableCell",children:[]})}let s=n.length-1;for(;++s<o;)n.push(null);e.inTable=!1;const c={type:"table",align:n,children:l};return e.patch(t,c),c}function Me(e){const t={align:[null],headless:!0};let n=0,r=0;return N(e,function(l){if(l.type==="element"){if(l.tagName==="table"&&e!==l)return re;if((l.tagName==="th"||l.tagName==="td")&&l.properties){if(!t.align[r]){const i=String(l.properties.align||"")||null;(i==="center"||i==="left"||i==="right"||i===null)&&(t.align[r]=i)}t.headless&&n<2&&l.tagName==="th"&&(t.headless=!1),r++}else l.tagName==="thead"?t.headless=!1:l.tagName==="tr"&&(n++,r=0)}}),t}function qe(){return{type:"tableCell",children:[]}}function L(){return{type:"tableRow",children:[]}}function Ue(e,t){const n={type:"text",value:t.value};return e.patch(t,n),n}function Ae(e,t){const n={type:"text",value:v(t)};return e.patch(t,n),n}function Be(e,t){const n={type:"text",value:"​"};return e.patch(t,n),n}const Re={comment:ue,doctype:p,root:ke,text:Ue},Fe={applet:p,area:p,basefont:p,bgsound:p,caption:p,col:p,colgroup:p,command:p,content:p,datalist:p,dialog:p,element:p,embed:p,frame:p,frameset:p,isindex:p,keygen:p,link:p,math:p,menu:p,menuitem:p,meta:p,nextid:p,noembed:p,noframes:p,optgroup:p,option:p,param:p,script:p,shadow:p,source:p,spacer:p,style:p,svg:p,template:p,title:p,track:p,abbr:u,acronym:u,bdi:u,bdo:u,big:u,blink:u,button:u,canvas:u,cite:u,data:u,details:u,dfn:u,font:u,ins:u,label:u,map:u,marquee:u,meter:u,nobr:u,noscript:u,object:u,output:u,progress:u,rb:u,rbc:u,rp:u,rt:u,rtc:u,ruby:u,slot:u,small:u,span:u,sup:u,sub:u,tbody:u,tfoot:u,thead:u,time:u,address:d,article:d,aside:d,body:d,center:d,div:d,fieldset:d,figcaption:d,figure:d,form:d,footer:d,header:d,hgroup:d,html:d,legend:d,main:d,multicol:d,nav:d,picture:d,section:d,a:se,audio:O,b:P,base:ce,blockquote:oe,br:ae,code:w,dir:U,dl:pe,dt:q,dd:q,del:M,em:k,h1:g,h2:g,h3:g,h4:g,h5:g,h6:g,hr:fe,i:k,iframe:de,img:H,image:H,input:ye,kbd:w,li:q,listing:x,mark:k,ol:U,p:z,plaintext:x,pre:x,q:xe,s:M,samp:w,select:Ne,strike:M,strong:P,summary:z,table:Te,td:j,textarea:Ae,th:j,tr:Ce,tt:w,u:k,ul:U,var:w,video:O,wbr:Be,xmp:x};function u(e,t){return e.all(t)}function d(e,t){return e.toFlow(e.all(t))}function p(){}const W={}.hasOwnProperty;function $e(e){return{all:He,baseFound:!1,elementById:new Map,frozenBaseUrl:void 0,handlers:{...Fe,...e.handlers},inTable:!1,nodeHandlers:{...Re,...e.nodeHandlers},one:Oe,options:e,patch:ze,qNesting:0,resolve:Pe,toFlow:je,toSpecificContent:Le}}function He(e){const t=e.children||[],n=[];let r=-1;for(;++r<t.length;){const l=t[r],i=this.one(l,e);Array.isArray(i)?n.push(...i):i&&n.push(i)}return n}function Oe(e,t){if(e.type==="element"){if(e.properties&&e.properties.dataMdast==="ignore")return;if(W.call(this.handlers,e.tagName))return this.handlers[e.tagName](this,e,t)||void 0}else if(W.call(this.nodeHandlers,e.type))return this.nodeHandlers[e.type](this,e,t)||void 0;if("value"in e&&typeof e.value=="string"){const n={type:"text",value:e.value};return this.patch(e,n),n}if("children"in e)return this.all(e)}function ze(e,t){e.position&&(t.position=le(e))}function Pe(e){const t=this.frozenBaseUrl;return e==null?"":t?String(new URL(e,t)):e}function je(e){return J(e)}function Le(e,t){const n=t(),r=[];let l=[],i=-1;for(;++i<e.length;){const s=e[i];if(o(s))l.length>0&&(s.children.unshift(...l),l=[]),r.push(s);else{const c=s;l.push(c)}}if(l.length>0){let s=r[r.length-1];s||(s=t(),r.push(s)),s.children.push(...l),l=[]}return r;function o(s){return s.type===n.type}}const We={};function et(e,t){const n=E(e),r=t||We,l=ie({newlines:r.newlines===!0}),i=$e(r);let o;l(n),N(n,function(c){if(c&&c.type==="element"&&c.properties){const a=String(c.properties.id||"")||void 0;a&&!i.elementById.has(a)&&i.elementById.set(a,c)}});const s=i.one(n,void 0);return s?Array.isArray(s)?o={type:"root",children:s}:o=s:o={type:"root",children:[]},N(o,function(c,a,h){if(c.type==="text"&&a!==void 0&&h){const f=h.children[a-1];if(f&&f.type===c.type)return f.value+=c.value,h.children.splice(a,1),f.position&&c.position&&(f.position.end=c.position.end),a-1;if(c.value=c.value.replace(/[\t ]*(\r?\n|\r)[\t ]*/,"$1"),h&&(h.type==="heading"||h.type==="paragraph"||h.type==="root")&&(a||(c.value=c.value.replace(/^[\t ]+/,"")),a===h.children.length-1&&(c.value=c.value.replace(/[\t ]+$/,""))),!c.value)return h.children.splice(a,1),a}}),o}export{et as t};
