import{a as n,p as s,f as y,m as A,i as m,b as E,s as g,c as N,e as S}from"./lodash-C0JF0MaN.js";function O(i){return b(i)?i.LABEL:i.name}function b(i){return m(i.LABEL)&&i.LABEL!==""}class r{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),y(this.definition,t=>{t.accept(e)})}}class o extends r{constructor(e){super([]),this.idx=1,n(this,s(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class v extends r{constructor(e){super(e.definition),this.orgText="",n(this,s(e,t=>t!==void 0))}}class T extends r{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,n(this,s(e,t=>t!==void 0))}}class c extends r{constructor(e){super(e.definition),this.idx=1,n(this,s(e,t=>t!==void 0))}}class x extends r{constructor(e){super(e.definition),this.idx=1,n(this,s(e,t=>t!==void 0))}}class p extends r{constructor(e){super(e.definition),this.idx=1,n(this,s(e,t=>t!==void 0))}}class u extends r{constructor(e){super(e.definition),this.idx=1,n(this,s(e,t=>t!==void 0))}}class l extends r{constructor(e){super(e.definition),this.idx=1,n(this,s(e,t=>t!==void 0))}}class h extends r{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,n(this,s(e,t=>t!==void 0))}}class f{constructor(e){this.idx=1,n(this,s(e,t=>t!==void 0))}accept(e){e.visit(this)}}function P(i){return A(i,d)}function d(i){function e(t){return A(t,d)}if(i instanceof o){const t={type:"NonTerminal",name:i.nonTerminalName,idx:i.idx};return m(i.label)&&(t.label=i.label),t}else{if(i instanceof T)return{type:"Alternative",definition:e(i.definition)};if(i instanceof c)return{type:"Option",idx:i.idx,definition:e(i.definition)};if(i instanceof x)return{type:"RepetitionMandatory",idx:i.idx,definition:e(i.definition)};if(i instanceof p)return{type:"RepetitionMandatoryWithSeparator",idx:i.idx,separator:d(new f({terminalType:i.separator})),definition:e(i.definition)};if(i instanceof l)return{type:"RepetitionWithSeparator",idx:i.idx,separator:d(new f({terminalType:i.separator})),definition:e(i.definition)};if(i instanceof u)return{type:"Repetition",idx:i.idx,definition:e(i.definition)};if(i instanceof h)return{type:"Alternation",idx:i.idx,definition:e(i.definition)};if(i instanceof f){const t={type:"Terminal",name:i.terminalType.name,label:O(i.terminalType),idx:i.idx};m(i.label)&&(t.terminalLabel=i.label);const a=i.terminalType.PATTERN;return i.terminalType.PATTERN&&(t.pattern=E(a)?a.source:a),t}else{if(i instanceof v)return{type:"Rule",name:i.name,orgText:i.orgText,definition:e(i.definition)};throw Error("non exhaustive match")}}}class M{visit(e){const t=e;switch(t.constructor){case o:return this.visitNonTerminal(t);case T:return this.visitAlternative(t);case c:return this.visitOption(t);case x:return this.visitRepetitionMandatory(t);case p:return this.visitRepetitionMandatoryWithSeparator(t);case l:return this.visitRepetitionWithSeparator(t);case u:return this.visitRepetition(t);case h:return this.visitAlternation(t);case f:return this.visitTerminal(t);case v:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function _(i){return i instanceof T||i instanceof c||i instanceof u||i instanceof x||i instanceof p||i instanceof l||i instanceof f||i instanceof v}function R(i,e=[]){return i instanceof c||i instanceof u||i instanceof l?!0:i instanceof h?g(i.definition,a=>R(a,e)):i instanceof o&&N(e,i)?!1:i instanceof r?(i instanceof o&&e.push(i),S(i.definition,a=>R(a,e))):!1}function W(i){return i instanceof h}function w(i){if(i instanceof o)return"SUBRULE";if(i instanceof c)return"OPTION";if(i instanceof h)return"OR";if(i instanceof x)return"AT_LEAST_ONE";if(i instanceof p)return"AT_LEAST_ONE_SEP";if(i instanceof l)return"MANY_SEP";if(i instanceof u)return"MANY";if(i instanceof f)return"CONSUME";throw Error("non exhaustive match")}export{T as A,M as G,o as N,c as O,x as R,f as T,p as a,l as b,u as c,h as d,W as e,R as f,v as g,w as h,_ as i,P as s};
