# StillRoot 技术上下文

## 当前技术栈

### 已配置的技术

- **React 19.1.0** - 最新版本的React框架
- **TypeScript 5.8.3** - 类型安全的JavaScript超集
- **Vite 7.0.4** - 快速的构建工具
- **Tailwind CSS 4.1.11** - 实用优先的CSS框架
- **Zustand 5.0.7** - 轻量级状态管理
- **Radix UI** - 无障碍组件库
- **pnpm** - 高效的包管理器

### 开发工具

- **ESLint** - 代码质量检查
- **TypeScript ESLint** - TypeScript专用lint规则
- **Vite TSConfig Paths** - 路径别名支持

## 项目架构设计

### 前端架构模式

- **组件化架构** - 基于React组件的模块化设计
- **状态管理** - 使用Zustand进行全局状态管理
- **类型安全** - 全面的TypeScript类型定义
- **响应式设计** - 移动端优先的UI设计

### 数据流设计

```
用户操作 → 组件事件 → Zustand Store → 状态更新 → UI重渲染
```

### 文件组织结构

```
src/
├── components/          # UI组件
│   ├── ui/             # 基础UI组件（Radix UI）
│   └── features/       # 功能组件
├── hooks/              # 自定义Hooks
├── stores/             # Zustand状态管理
├── types/              # TypeScript类型定义
├── utils/              # 工具函数
├── services/           # 服务层（API调用等）
└── assets/             # 静态资源
```

## 核心功能技术实现

### 1. 对话式界面

- **聊天组件** - 类似微信的消息列表
- **消息气泡** - 支持文本、图片、文件显示
- **输入框** - 支持文本输入和文件上传
- **滚动加载** - 虚拟滚动优化性能

### 2. 频道系统

- **频道列表** - 侧边栏频道管理
- **频道切换** - 路由级别的频道切换
- **频道创建** - 动态频道创建功能

### 3. 标签系统

- **标签解析** - 自动识别#标签
- **标签过滤** - 基于标签的消息过滤
- **标签管理** - 标签的增删改查

### 4. AI集成

- **OpenAI API** - 对话AI功能
- **消息处理** - AI消息的特殊处理
- **流式响应** - 实时AI回复显示

### 5. 数据持久化

- **LocalStorage** - 用户设置和配置
- **IndexedDB** - 消息和频道数据
- **离线支持** - 离线数据同步

## 性能优化策略

### 1. 代码分割

- **路由级别分割** - 按页面分割代码
- **组件懒加载** - 大型组件的按需加载
- **第三方库优化** - 只引入需要的功能

### 2. 渲染优化

- **React.memo** - 组件记忆化
- **useMemo/useCallback** - 计算和函数记忆化
- **虚拟滚动** - 长列表性能优化

### 3. 缓存策略

- **浏览器缓存** - 静态资源缓存
- **API缓存** - AI请求结果缓存
- **状态缓存** - 用户操作状态缓存

## 开发规范

### 1. 代码规范

- **ESLint配置** - 统一的代码风格
- **TypeScript严格模式** - 类型安全
- **Prettier格式化** - 代码格式化

### 2. 组件规范

- **函数组件** - 使用函数组件和Hooks
- **Props类型定义** - 完整的Props类型
- **组件文档** - 组件使用说明

### 3. 状态管理规范

- **Store模块化** - 按功能模块组织Store
- **类型安全** - Store状态的完整类型定义
- **持久化** - 关键状态的本地持久化

## 测试策略

### 1. 单元测试

- **组件测试** - 使用React Testing Library
- **Hook测试** - 自定义Hook的测试
- **工具函数测试** - 纯函数的测试

### 2. 集成测试

- **用户流程测试** - 完整用户操作流程
- **API集成测试** - AI功能的集成测试

### 3. 性能测试

- **加载性能** - 页面加载时间
- **交互性能** - 用户交互响应时间

## 部署和发布

### 1. 构建优化

- **Vite构建** - 生产环境构建
- **代码压缩** - JavaScript和CSS压缩
- **资源优化** - 图片和字体优化

### 2. PWA支持

- **Service Worker** - 离线功能支持
- **Manifest文件** - 应用安装支持
- **缓存策略** - 智能缓存管理

### 3. 发布流程

- **GitHub Pages** - 静态网站托管
- **Vercel/Netlify** - 自动部署
- **CDN加速** - 全球内容分发
